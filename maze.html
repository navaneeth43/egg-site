<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hard Maze Escape Game 🧠</title>
  <style>
    body {
      background-color: #f0f0f0;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }

    h1 {
      color: #3f51b5;
    }

    canvas {
      background-color: #ffffff;
      border: 4px solid #000;
      display: block;
      margin: 20px auto;
    }

    #message {
      font-size: 1.4em;
      color: #e91e63;
      margin-top: 10px;
    }

    #timer {
      font-size: 1.6em;
      font-weight: bold;
      color: #2196f3;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <h1>Hard Maze Escape Game 🧱</h1>
  <p>Use Arrow Keys or WASD to reach the red square!</p>
  <canvas id="mazeCanvas" width="500" height="500"></canvas>
  <div id="timer">Time Left: 15s</div>
  <div id="message"></div>

  <script>
    const canvas = document.getElementById("mazeCanvas");
    const ctx = canvas.getContext("2d");
    const timerEl = document.getElementById("timer");
    const messageEl = document.getElementById("message");

    const player = { x: 20, y: 20, size: 20 };
    const goal = { x: 460, y: 460, size: 20 };

    const walls = [
      {x: 0, y: 60, w: 400, h: 20},
      {x: 100, y: 120, w: 400, h: 20},
      {x: 0, y: 180, w: 400, h: 20},
      {x: 100, y: 240, w: 400, h: 20},
      {x: 0, y: 300, w: 400, h: 20},
      {x: 100, y: 360, w: 400, h: 20},

      {x: 60, y: 0, w: 20, h: 400},
      {x: 120, y: 100, w: 20, h: 400},
      {x: 180, y: 0, w: 20, h: 400},
      {x: 240, y: 100, w: 20, h: 400},
      {x: 300, y: 0, w: 20, h: 400},
      {x: 360, y: 100, w: 20, h: 400},
      {x: 420, y: 0, w: 20, h: 400}
    ];

    let timeLeft = 10; // seconds
    let gameOver = false;

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw player
      ctx.fillStyle = "green";
      ctx.fillRect(player.x, player.y, player.size, player.size);

      // Draw goal
      ctx.fillStyle = "red";
      ctx.fillRect(goal.x, goal.y, goal.size, goal.size);

      // Draw walls
      ctx.fillStyle = "black";
      walls.forEach(w => ctx.fillRect(w.x, w.y, w.w, w.h));
    }

    function isColliding(rect1, rect2) {
      return (
        rect1.x < rect2.x + rect2.w &&
        rect1.x + rect1.size > rect2.x &&
        rect1.y < rect2.y + rect2.h &&
        rect1.y + rect1.size > rect2.y
      );
    }

    function move(dx, dy) {
      if (gameOver) return; // Prevent moving after game over

      const newX = player.x + dx;
      const newY = player.y + dy;

      const tempPlayer = { x: newX, y: newY, size: player.size };

      for (let wall of walls) {
        if (isColliding(tempPlayer, wall)) {
          messageEl.textContent = "💥 You hit a wall! Resetting...";
          player.x = 20;
          player.y = 20;
          draw();
          return;
        }
      }

      player.x = newX;
      player.y = newY;
      messageEl.textContent = "";

      // Check goal collision
      if (
        player.x < goal.x + goal.size &&
        player.x + player.size > goal.x &&
        player.y < goal.y + goal.size &&
        player.y + player.size > goal.y
      ) {
        messageEl.textContent = "🎉 You Escaped the Hard Maze!";
        endGame();
      }

      draw();
    }

    function endGame() {
      gameOver = true;
      clearInterval(timerInterval);
    }

    document.addEventListener("keydown", (e) => {
      if (gameOver) return;

      switch (e.key) {
        case "ArrowUp":
        case "w":
        case "W":
          move(0, -20);
          break;
        case "ArrowDown":
        case "s":
        case "S":
          move(0, 20);
          break;
        case "ArrowLeft":
        case "a":
        case "A":
          move(-20, 0);
          break;
        case "ArrowRight":
        case "d":
        case "D":
          move(20, 0);
          break;
      }
    });

    draw();

    // Timer logic
    function updateTimer() {
      if (gameOver) return;

      timeLeft--;
      timerEl.textContent = `Time Left: ${timeLeft}s`;

      if (timeLeft <= 0) {
        messageEl.textContent = "⏰ Time's up! You lose the game.";
        endGame();
      }
    }

    const timerInterval = setInterval(updateTimer, 1000);
  </script>

</body>
</html>
